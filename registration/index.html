<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link>
    <rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css"
      crossorigin="anonymous"
    >
    <link rel="stylesheet" type="text/css" href="style.css" />
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h2>REGISTRATION FORM</h2>
      </div>
      <form class="form" id="form">
        <div class="form-control">
          <label>Username</label>
          <input
            type="text"
            name=""
            id="Username"
            placeholder="enter your fullname"
            autocomplete="off"
          />
          <i class="fa fa-check-circle" aria-hidden="true"></i>
          <i class="fa fa-exclamation-circle" aria-hidden="true"></i>
          <small>Error msg</small>
        </div>
        <div class="form-control">
          <label>Email</label>
          <input
            type="text"
            name=""
            id="Email"
            placeholder="enter your Email"
            autocomplete="off"
          />
          <i class="fa fa-check-circle" aria-hidden="true"></i>
          <i class="fa fa-exclamation-circle" aria-hidden="true"></i>
          <small>Error msg</small>
        </div>
        <div class="form-control">
          <label>Phone number</label>
          <input
            type="number"
            name=""
            id="Phone"
            placeholder="enter your Phone Number"
            autocomplete="off"
          />
          <i class="fa fa-check-circle" aria-hidden="true"></i>
          <i class="fa fa-exclamation-circle" aria-hidden="true"></i>
          <small>Error msg</small>
        </div>
        <div class="form-control">
          <label>Password</label>
          <input
            type="password"
            name=""
            id="Password"
            placeholder="enter your Password"
            autocomplete="off"
          />
          <i class="fa fa-check-circle" aria-hidden="true"></i>
          <i class="fa fa-exclamation-circle" aria-hidden="true"></i>
          <small>Error msg</small>
        </div>
        <div class="form-control">
          <label>Confirm Password</label>
          <input
            type="password"
            name=""
            id="cpassword"
            placeholder="enter your Password again"
            autocomplete="off"
          />
          <i class="fa fa-check-circle" aria-hidden="true"></i>
          <i class="fa fa-exclamation-circle" aria-hidden="true"></i>
          <small>Error msg</small>
        </div>
        <div class="submit-div"><button class="btn submit">Submit</button></div>
      </form>
    </div>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script type="text/javascript">
      const form = document.getElementById("form");
      const username = document.getElementById("Username");
      const email = document.getElementById("Email");
      const phone = document.getElementById("Phone");
      const password = document.getElementById("Password");
      const cpassword = document.getElementById("cpassword");
      form.addEventListener("submit", (event) => {
        event.preventDefault();
        validate();
      })
      const sendData=(sRate,count) => {
        if(sRate===count){
          alert('registration successful');
          ("welcome!" + username, "Registration successfull", "success");
          location.href ='demo.html?username=${usernameVal}'
        }
      }
      const successMsg =(usernameVal) =>{
        let formcon=document.getElementsByClassName('form-control');
        var count=formcon.length;
        var sRate=0
        for(var i = 0;i<count;i++){
        if(formcon[i].classname === "form-control success"){
          sRate=sRate +1;
          sendData(usernameVal,sRate,count);
        }else{
          return false;
        }
      }
      }
      const isEmail = (emailVal) => {
        var atSymbol = emailVal.indexOf("@");
        if (atSymbol < 1) return false;
        var dot = emailVal.lastIndexOf(".");
        if (dot <= atSymbol + 3) return false;
        if (dot === emailVal.length - 1) return false;
        return true;
      };
          const validate = () => {
          const usernameVal = username.value.trim();
          const emailVal = email.value.trim();
          const phoneVal = phone.value.trim();
          const passwordVal = password.value.trim();
          const cpasswordVal = cpassword.value.trim();
          if (usernameVal ===  " ") {
            setErrorMsg(username, "username cannot be blank");
          } else if (usernameVal.length <= 2) {
            setErrorMsg(username, "username min 3 char");
          } else {
            setSuccessMsg(username);
          }
          if (emailVal === " ") {
            setErrorMsg(email, "email cannot be blank");
          } else if (!isEmail(emailVal)) {
            setErrorMsg(email, "not a valid email");
          } else {
            setSuccessMsg(email);
          }
          if (phoneVal === " ") {
            setErrorMsg(phone, "phone cannot be blank");
          } else if (phoneVal.length < 10) {
            setErrorMsg(phone, "not a valid phone number");
          } else {
            setSuccessMsg(phone);
          }
          if (passwordVal === " ") {
            setErrorMsg(password, "password cannot be blank");
          } else if (passwordVal.length <= 5) {
            setErrorMsg(password, "minimum 6 character");
          } else {
            setSuccessMsg(password);
          }
          if (cpasswordVal === "") {
            setErrorMsg(cpassword, "password cannot be blank");
          } else if (passwordVal != cpasswordVal) {
            setErrorMsg(cpassword, "password not matched");
          } else {
            setSuccessMsg(cpassword);
          }
          successMsg(usernameVal)
        };
        function setErrorMsg(input, errormsgs) {
          const formControl = input.parentElement;
          const small = formControl.querySelector("small");
          formControl.className = "form-control error";
          small.innerText = errormsgs;
        }
        function setSuccessMsg(input){
          const formControl = input.parentElement;
          formControl.className = "form-control success";
        }
    </script>
  </body>
</html>
